---
title: "Crime Rates in Toronto Neighborhoods By Year and Type"
author: 
  - Yuxuan Yang
thanks: "Code and data are available at: https://github.com/Yuxuan-Yang-Maggie/starter_folder."
date: "`r format(Sys.time(), '%d %B %Y')`"
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
output:
  bookdown::pdf_document2
toc: FALSE
bibliography: references.bib
---

# Introduction
First paragraph is going to be motivational and broad.

Second paragraph is about what was done and what was found.

Third paragraph is about implications.

The remainder of this paper is: Section \@ref(data) explains the data. Section 
\@ref(results) covers results...... 

# Data
## Data Source And Collection Methods
This paper uses data on neighborhood crime rates published by the Toronto Police Services on the City of Toronto Open Data Portal (Data 2020); the data was last refreshed on May 6, 2021, and I imported the data as csv file directly using the R package opendatatoronto (Gelfand, 2020). This dataset contains information on numbers of different types of crimes in each of the 140 Toronto neighborhoods from the year 2014 to 2020, together with crime rates of different types of crimes in each neighborhood from 2014 to 2020, where the crime rate is calculated as the crime count per 100,000 population* per year in each neighborhood (cite opendatatoronto here). 

The Toronto Police Service did not specify how exactly the crime cases in this dataset were processed, but it mentions that the crime rates were calculated using "the standard definition by StatsCan" (cite here). In addition, crimes can be reported to the Police and collected through many channels. For example, citizens can voluntarily report crimes they have experienced or observed. It is also possible that the Police will discover crimes on site through daily patrols. Nevertheless, the fact that crimes can be self-reported indicates the possibility of crimes being under-reported, which could result in potential bias of number of crime cases on record. 

## Population and Samples
The population of this dataset is the total population in each Toronto neighborhood in each year from 2014 to 2020. Note that the total population in each neighborhood in this dataset is only a projection estimated by Environics Analytics instead of the true value. The sampling frame is all the crime cases reported and recorded in this dataset. 

## How Respondents Were Found
Respondents in our Neighborhood Crime Rates dataset are the reporters of crime cases in each neighborhood. Since crime cases are mainly collected through either self-reporting or police discoveries, our respondents here are discovered by the Toronto Police Service if evidences of crime are observed. In terms of crime data, the action of non-response will cause crime cases in Toronto to be under-reported and under-represented, leading to significant bias in the results of our crime data analysis. 

## Key Features, Major Strengths And Weaknesses
The most important feature of Open Data Toronto is that it can be easily accessed and reproduced by the general public. While a typical strength of Open Data Toronto would be that it facilitates the flow of information across different government sections and also between the government and the general public, it also ensures the greatest extent of transparency and authenticity while conveying reliable data to citizens. Nevertheless, Open Data Toronto also has a severe weakness, which is the problem of missing information. 

## Data characteristics

```{r, echo=FALSE, warning=FALSE}
library(tidyverse)
crime <- read_csv("~/starter_folder/inputs/data/crime.csv")
#head(crime)
```

```{r, echo=FALSE}
# Select neighborhood names and calculate number of crimes for each year
crime_per_hood <- crime %>%
  mutate(crime_2014 = Assault_2014 + AutoTheft_2014 + BreakAndEnter_2014 +
           Robbery_2014 + TheftOver_2014 + Homicide_2014 + Shootings_2014,
         crime_2015 = Assault_2015 + AutoTheft_2015 + BreakAndEnter_2015 +
           Robbery_2015 + TheftOver_2015 + Homicide_2015 + Shootings_2015,
         crime_2016 = Assault_2016 + AutoTheft_2016 + BreakAndEnter_2016 +
           Robbery_2016 + TheftOver_2016 + Homicide_2016 + Shootings_2016,
         crime_2017 = Assault_2017 + AutoTheft_2017 + BreakAndEnter_2017 +
           Robbery_2017 + TheftOver_2017 + Homicide_2017 + Shootings_2017,
         crime_2018 = Assault_2018 + AutoTheft_2018 + BreakAndEnter_2018 +
           Robbery_2018 + TheftOver_2018 + Homicide_2018 + Shootings_2018,
         crime_2019 = Assault_2019 + AutoTheft_2019 + BreakAndEnter_2019 +
           Robbery_2019 + TheftOver_2019 + Homicide_2019 + Shootings_2019,
         crime_2020 = Assault_2020 + AutoTheft_2020 + BreakAndEnter_2020 +
           Robbery_2020 + TheftOver_2020 + Homicide_2020 + Shootings_2020)
```

```{r, echo=FALSE}
crime_per_hood <- crime_per_hood %>%
  select(Neighbourhood, F2020_Population_Projection, crime_2014, crime_2015,
         crime_2016, crime_2017, crime_2018, crime_2019, crime_2020)
```

```{r, echo=FALSE}
# convert the table from wide to long
new_crime_hood <- gather(crime_per_hood, crime_year, num_crime,
                         crime_2014:crime_2020, factor_key=TRUE)

new_crime_hood <- new_crime_hood %>%
  mutate(year = case_when(crime_year == "crime_2014" ~ 2014,
                          crime_year == "crime_2015" ~ 2015,
                          crime_year == "crime_2016" ~ 2016,
                          crime_year == "crime_2017" ~ 2017,
                          crime_year == "crime_2018" ~ 2018,
                          crime_year == "crime_2019" ~ 2019,
                          crime_year == "crime_2020" ~ 2020))
```

```{r, echo = FALSE}
library(knitr)

new_crime_hood %>%
  select(Neighbourhood, F2020_Population_Projection, num_crime, year) %>%
  slice(1:10) %>%
  kable(caption = "First 10 rows of our long dataset showing crimes per year
        per neighborhood")
  
```


```{r, fig.cap="Crime growth of top 5 neighborhoods with most population from 2014 to 2020, echo = FALSE"}
# Plot number of crimes on y-axis and year on x-axis for 5 neighborhoods 
# with highest populations in 2020
new_crime_hood %>%
  filter(Neighbourhood %in% c("Waterfront Communities-The Island", "Woburn",
                            "Willowdale East", "Islington-City Centre West",
                            "Rouge")) %>%
  ggplot(aes(x=year, y=num_crime, group=Neighbourhood, color=Neighbourhood)) +
  geom_line() +
  labs(title = "Toronto Crime Cases",
       subtitle = "Top 5 Neighborhoods with Most Populations",
       x = "Year",
       y = "Number of Crimes") +
  theme_minimal()
```

Our data is of penguins (Figure \@ref(fig:bills)).



Talk more about it.

Also bills and their average (Figure \@ref(fig:billssssss)). (Notice how you can change the height and width so they don't take the whole page?)

Talk way more about it. 

# Discussion

## First discussion point

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional details


\newpage


# References


